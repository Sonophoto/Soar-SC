sp {apply*build-building
   (state <s> ^operator <op>
              ^io.input-link <i>
              ^io.output-link <o>
              ^buildings <b>)
   (<op> ^name build-building
         ^worker <id>
         ^location-x <x>
         ^location-y <y>
         ^type <type-id>)
   (<i> ^types.type <t>)
   (<b> ^building <building>)
   (<building> ^type <type-id>
               ^count <c>)
-->
   (<o> ^build <b>)
   (<b> ^type <type-id>
        ^location-x <x>
        ^location-y <y>
        ^worker <id>)
   (<building> ^count <c> -
               ^count (+ <c> 1))
}

#Preference rules
sp {pref*buildings-better-than-units
   (state <s> ^operator <o1> +
              ^operator <o2> +)
   (<o1> ^name build-unit)
   (<o2> ^name build-building)
-->
   (<s> ^operator <o2> > <o2>)
}
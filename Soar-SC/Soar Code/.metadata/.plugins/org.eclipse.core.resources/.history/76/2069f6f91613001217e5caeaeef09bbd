sp {apply*remove-unit-attack-if-not-attacking
   (state <s> ^name Soar-SC
              ^operator <o>
              ^units.unit <marine>
              ^types.type <marine-type>)
   (<marine-type> ^name |Terran Marine|
                  ^id <marine-type-id>)
   (<marine> ^type <marine-type-id>
             ^unit-attack <a>
             ^idle 1)
-->
   (<marine> ^unit-attack <a> -)
}

sp {apply*remove-building-attack-if-not-attacking
   (state <s> ^name Soar-SC
              ^operator <o>
              ^units.unit <marine>
              ^types.type <marine-type>)
   (<marine-type> ^name |Terran Marine|
                  ^id <marine-type-id>)
   (<marine> ^type <marine-type-id>
             ^building-attack <a>
             ^idle 1)
-->
   (<marine> ^building-attack <a> -)
}

sp {propose*attack-unit
   (state <s> ^name Soar-SC
              ^io.input-link.enemy-units <enemy-units>
              ^io.input-link.units <my-units>
              ^io.input-link.types.type <marine-type>
              ^io.output-link <output-link>)
   (<enemy-units> ^unit <enemy>)
   (<enemy> ^id <enemy-id>)
   (<marine-type> ^name |Terran Marine|
                  ^id <type-id>)
   (<my-units> ^unit <my-unit>)
   (<my-unit> ^type <type-id>
              ^id <marine-id>
             -^unit-attack)
-->
   (<s> ^operator <attack-operator> + >)
   (<attack-operator> ^name attack
                      ^enemy <enemy-id>
                      ^marine <marine-id>
                      ^unit-attack 1)
}

sp {propose*attack-building
   (state <s> ^name Soar-SC
              ^io.input-link.enemy-units <enemy-units>
              ^io.input-link.units <my-units>
              ^io.input-link.types.type <marine-type>
              ^io.output-link <output-link>)
   (<enemy-units> ^building <enemy>)
   (<enemy> ^id <enemy-id>)
   (<marine-type> ^name |Terran Marine|
                  ^id <type-id>)
   (<my-units> ^unit <my-unit>)
   (<my-unit> ^type <type-id>
              ^id <marine-id>
             -^building-attack
             -^unit-attack)
-->
   (<s> ^operator <attack-operator> + >)
   (<attack-operator> ^name attack
                      ^enemy <enemy-id>
                      ^marine <marine-id>)
}

sp {pref*all-attacks-of-same-type-are-equal
   (state <s> ^name Soar-SC
              ^operator <attack1> +
              ^operator <attack2> +)
   (<attack1> ^name attack
              ^unit-attack)
   (<attack2> ^name attack
              ^unit-attack)
-->
   (<s> ^operator <attack1> = <attack2>)
}

sp {pref*all-attacks-of-same-type-are-equal-two
   (state <s> ^name Soar-SC
              ^operator <attack1> +
              ^operator <attack2> +)
   (<attack1> ^name attack
             -^unit-attack)
   (<attack2> ^name attack
             -^unit-attack)
-->
   (<s> ^operator <attack1> = <attack2>)
}

sp {pref*unit-attack-better-than-building
   (state <s> ^name Soar-SC
              ^operator <attack1> +
              ^operator <attack2> +)
   (<attack1> ^name attack
              ^unit-attack)
   (<attack2> ^name attack
             -^unit-attack)
-->
   (<s> ^operator <attack1> > <attack2>)
}

sp {pref*attack-better-than-all
   (state <s> ^name Soar-SC
              ^operator <non-attack> +
              ^operator <attack> +)
   (<non-attack> ^name { <> attack })
   (<attack> ^name attack)
-->
   (<s> ^operator <attack> > <non-attack>)
}

sp {apply*attack
   (state <s> ^name Soar-SC
              ^operator <attack-operator>
              ^io.output-link <output-link>)
   (<attack-operator> ^name attack
                      ^enemy <enemy-id>
                      ^marine <marine-id>)
-->
   (<output-link> ^move <attack>)
   (<attack> ^object <marine-id>
             ^dest <enemy-id>)
}

sp {apply*attack-add-unit-attack
   (state <s> ^name Soar-SC
              ^operator <attack-operator>
              ^units.unit <marine>)
   (<attack-operator> ^name attack
                      ^marine <marine-id>
                      ^unit-attack)
   (<marine> ^id <marine-id>)
-->
   (<marine> ^unit-attack 1)
}

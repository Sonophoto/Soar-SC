sp {propose*new-scout
   (state <s> ^name Soar-SC
              ^io.input-link <input-link>)
   (<input-link> ^fog-tiles <fog-tiles>
                 ^units.unit <scv>
                 ^types.type <scv-type>)
   (<scv-type> ^name |Terran SCV|
               ^id <scv-type-id>)
   (<scv> ^type <scv-type-id>
          ^idle 1
          ^id <scv-id>)
   -{(<input-link> ^unit.unit <other-scv>)
     (<other-scv> ^scouting 1)}
-->
   (<s> ^operator <scout-operator> + >)
   (<scout-operator> ^name scout
                     ^id <scv-id>)
}

sp {apply*new-scout
   (state <s> ^operator <o>
              ^io.input-link.units.unit <scv>)
   (<o> ^name scout
        ^id <scv-id>)
   (<scv> ^id <scv-id>)
-->
   (<scv> ^scouting 1
          ^last-scout-tile <tile>)
   (<tile> ^x -1
           ^y -1)
}

sp {propose*scouting
   (state <s> ^name Soar-SC
              ^io.input-link.units.unit <scv>
              ^io.input-link.fog-tiles <fog-tiles>)
   (<scv> ^scouting 1
          ^idle 1
          ^id <scv-id>)
-->
   (<s> ^operator <start-scouting>)
   (<start-scouting> ^name scouting
                     ^id <scv-id>)
}

#substate

sp {propose*initialize-scouting-substate
   (state <s> -^name
               ^superstate <ss>)
   (<ss> ^operator <operator>)
   (<operator> ^name scouting)
-->
   (<s> ^operator <op> + >)
   (<op> ^name init-scouting
}

sp {apply*initialize-scouting-substate
   (state <s> ^operator.name init-scouting
              ^superstate <ss>)
   (<ss> ^operator <operator>
         ^io.input-link.units.unit <scv>)
   (<operator> ^name scouting
               ^id <scv-id>)
   (<scv> ^id <scv-id>)
-->
   (<s> ^name scouting-substate
        ^selected-unit <scv>)
}

sp {

sp {apply*scouting
   (state <s> ^name Soar-SC
              ^operator <scouting>
              ^io.output-link <output-link>
              ^io.input-link <input-link>)
   (<scouting> ^name scouting
               ^id <scv-id>
               ^tile <fog-tile>)
   (<fog-tile> ^x <x>
               ^y <y>)
   (<input-link> ^units.unit <scv>)
   (<scv> ^id <scv-id>)
-->
   (<scv> ^last-scout-tile <tile>)
   (<tile> ^x <x>
           ^y <y>)
   (<output-link> ^move <command>)
   (<command> ^object <scv-id>
              ^x <x>
              ^y <y>)
}

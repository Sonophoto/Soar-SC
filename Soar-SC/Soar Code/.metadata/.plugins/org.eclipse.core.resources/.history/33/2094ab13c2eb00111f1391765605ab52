sp {propose*build-supply-depot
   (state <s> ^name Soar-SC
              ^superstate nil
              ^io.input-link <i>
              ^buildings.building <b>)
   (<i> ^minerals <m> > 99
        ^units.unit <build-unit>
        ^units.unit <already-building>)
        ^types.type <t>
        ^types.type <t-s>)
   (<t> ^name |Terran SCV|
        ^id <type-id>)
   (<build-unit> ^type <type-id>
        ^idle <idle>
        ^carrying <carrying>
        ^id <id>)
   (<t-s> ^name |Terran Supply Depot|
          ^id <supply-id>)
   (<b> ^type <supply-id>
        ^count { <l> < 9 })
   (<already-building> ^constructing { <> <supply-id> })
-->
   (<s> ^operator <o> + =)
   (<o> ^name build-building
        ^worker <id>
        ^idle <idle>
        ^carrying <carrying>
        ^location <l>
        ^type <supply-id>)
}

#Preference rules

sp {pref*building-supply-depot-better-than-gather-minerals
   (state <s> ^operator <o1> +
              ^operator <o2> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o1> ^name build-building
         ^type <type-id>)
   (<o2> ^name gather-minerals)
-->
   (<s> ^operator <o1> > <o2>)
}

sp {pref*building-supply-depot-better-than-build-building
   (state <s> ^operator <o1> +
              ^operator <o2> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o1> ^name build-building
         ^type <type-id>)
   (<o2> ^name build-building
         ^type { <> <type-id> })
-->
   (<s> ^operator <o1> > <o2>)
}

#Elaborations

sp {elaboration*supply-depots*location-to-x-y-0
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 0)
-->
   (<o> ^location-x 42
        ^location-y 47)
}

sp {elaboration*supply-depots*location-to-x-y-1
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 1)
-->
   (<o> ^location-x 45
        ^location-y 47)
}

sp {elaboration*supply-depots*location-to-x-y-2
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 2)
-->
   (<o> ^location-x 48
        ^location-y 47)
}

sp {elaboration*supply-depots*location-to-x-y-3
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 3)
-->
   (<o> ^location-x 42
        ^location-y 49)
}

sp {elaboration*supply-depots*location-to-x-y-4
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 4)
-->
   (<o> ^location-x 45
        ^location-y 49)
}

sp {elaboration*supply-depots*location-to-x-y-5
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 5)
-->
   (<o> ^location-x 48
        ^location-y 49)
}

sp {elaboration*supply-depots*location-to-x-y-6
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 6)
-->
   (<o> ^location-x 42
        ^location-y 51)
}

sp {elaboration*supply-depots*location-to-x-y-7
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 7)
-->
   (<o> ^location-x 45
        ^location-y 51)
}

sp {elaboration*supply-depots*location-to-x-y-8
   (state <s> ^operator <o> +
              ^io.input-link.types.type <t>)
   (<t> ^name |Terran Supply Depot|
        ^id <type-id>)
   (<o> ^name build-building
        ^type <type-id>
        ^location 8)
-->
   (<o> ^location-x 48
        ^location-y 51)
}
